# 【東京】JJUG ナイトセミナー 「Java O/Rマッパー特集」にさんかしてきました。 #jjug
久しぶりに？JJUGナイトセミナーに参加してきました。その際のメモになります。

あくまでもメモなので、抜けている箇所や誤っている箇所がある可能性があります。各スライドなどをご参照ください。

## 概要
- [【東京】JJUG ナイトセミナー 「Java O/Rマッパー特集」 7/26(水)開催](https://jjug.doorkeeper.jp/events/63161)

- タイムテーブル

|- 時間 -|-	内容 -|
|---|---|
| 19:00-19:05 | オープニング |
| 19:05-19:30 | 「25分でわかるJPA」 |
| 19:30-19:55 | 「MyBatis を利用した Web Application 開発についてのご紹介」 |
| 19:55-20:05 | 休憩 |
| 20:05-20:30 | 「ざっくりわかるDoma」 |
| 20:30-20:55 | 「Reladomo入門」 |
| 20:55-21:00 | クロージング |
| 21:00- | 懇親会 |


## 25分でわかるJPA
- スピーカー
  - 多田真敏 ([@suke_masa](https://twitter.com/twit_hitter/suke_masa))
  - 株式会社カサレアル
- 25分でわかるJPA → 25分で（難しさが）わかるJPA
- JPAとは
  - JAVA EEの一部（仕様のみ）
  - JPA実装ライブラリ
    - 仕様のみなので実装が必要。
    - 実装によって挙動がぜんぜん違う。
    - Hibernate
      - 今回はこちらを使用して説明する。
    - EclipseLink
  - SQLはかかない
- 実際に実行されるSQLは絶対にログに出せ！
- エンティティの状態
  - めっちゃ重要
  - 永続化コンテキストに含まれるか否か
  - EntityManagerのメソッドで状態を変更する。
- エンティティの状態遷移のスライドが最大に重要。
- mergeメソッドの引数のオブジェクトは状態変更されない。
  - 返り値のオブジェクトが状態変更されている。
- JPQLとは
  - SELECT,UPDATE,DEKETEのみ。
  - INSERT、集合演算、FROMでの副問合せはできない。
  - 殆どSQLと一緒だが、ちょっと違う。
- リレーションとN+1問題
  - フェッチは基本LAZY
    - EAGERは不要なデータを読み込むため。
  - LAZYからEAGERから動的に変更も可能。
    - JOIN FETCH文
    - DISTINCTを使用する。
      - SQLに加えてListの重複を取り除く。
- Spring Data JPA
  - 超おすすめ
  - 便利機能満載
- JPAは使えるのか？
  - 使える
  - ただし、正しい知識、シチュエーションを選ぶ必要がある。
- JPAを使っていい条件
  - DBを新規に設計できる
  - 集合演算やFROM区
  - パーフェクトJava EEを読破した人がプロジェクトに1人以上いる
  - ↑が1つでも当てはまらないならば他のORマッパーを使ったほうが良い。

## MyBatis を利用した Web Application 開発についてのご紹介
- スピーカー
  - Tokuhiro Matsuno ([@tokuhirom](https://twitter.com/tokuhirom))
  - LINE Corp.
- MyBatisとは
  - 永続化フレームワーク
- SQLは直接書く
  - interfaceを通じて呼び出す
- 結果をBeanにMappingする
- シンプルなので学習コストが低い
- どんなスキーマでも使える。
  - 手でSQLを書くため。
  - 主キーがなくても
  - サブクエリなど複雑なクエリも簡単に使える。
- 完全にDB製品に依存する。
  - 手でSQLを書くため。
  - JPAとか使っていても結局、なんだかんだあってそのまま移行は難しい
- 発行されるクエリが人間に読みやすい
  - 手で書くため。
- 3つの書き方
  - XML
    - 主流
  - アノテーション
    - 最近、増えてきている。
  - Java DSL（Statement builder）
    - これは異端とのこと。
  - LineではXMLが73%アノテーションが27%の使用率。
- 困ったときに検索するとStack Overflowに引っかかるので大丈夫
- Intellij IDEAがあれば、色々補完が効くので結構大丈夫。
- Spring bootのサポートが手厚い。
- Spring Initializrってのがかなりいいらしい。
- 利点
  - SQLが直接書いてある
    - コードレビューが容易
    - スロークエリのリカバリが容易
  - ドキュメントが充実
    - Qiitaの記事が結構いい
  - コードがシンプル
- 欠点
  - XML前提で書かれているので、アノテーションで書く人はドキュメントが読みにくい

## ざっくりわかるDoma
- スピーカー
  - うらがみ (https://github.com/backpaper0)
  - 関西Javaエンジニアの会


## Reladomo入門
- スピーカー
  - 伊藤博志 ([@itohiro73](https://twitter.com/itohiro73))
  - 株式会社FOLIO
